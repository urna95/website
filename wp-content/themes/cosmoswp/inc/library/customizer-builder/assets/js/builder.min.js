!function(e,t){var o=e(document),i=CosmosWP_Customizer_Builder.is_rtl,s=function(s,n){var r={id:n,controlId:"",cols:12,cellHeight:45,items:[],container:null,ready:!1,devices:{desktop:CosmosWP_Customizer_Builder.desktop_label,mobile:CosmosWP_Customizer_Builder.mobile_tablet_label},activePanel:"desktop",panels:{},activeRow:"main",draggingItem:null,getTemplate:_.memoize(function(){var t=this,o={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(i,s,a){return _.isUndefined(s)&&(s="tmpl-customize-control-"+t.type),!_.isUndefined(a)&&_.isString(a)?o.variable=a:o.variable="data",_.template(e("#"+s).html(),null,o)(i)}}),drag_drop:function(){var t=this;e(".cosmoswp-device-panel",t.container).each(function(){var o=e(this),i=o.data("device"),s=[];t.panels[i]={},e(".cosmoswp-cb-items",o).each(function(t){var o,a=e(this).attr("data-id")||"";o=a?"_sid_"+i+"-"+a:"_sid_"+i+t,e(this).attr("id",o),s[t]="#"+o}),e(".grid-stack",o).each(function(){var o=e(this).attr("data-id")||"";t.panels[i][o]=e(this),e(this).droppable({out:function(e,t){},over:function(e,t){},drop:function(o,i){var s=e(this);t.gridster(s,i,o),t.save()}})});var a=e("#_sid_all-sidebar",o),n=a.attr("id")||!1;e(".cosmoswp-available-items .grid-stack-item",o).draggable({revert:"invalid",connectToSortable:!!n&&"#"+n,start:function(t,i){e("body").addClass("builder-item-moving"),e(".cosmoswp-cb-items",o).css("z-index",""),i.helper.parent().css("z-index",9999),i.helper.closest(".cosmoswp-available-items").addClass("cwp-available-item-moving")},stop:function(t,i){e("body").removeClass("builder-item-moving"),e(".cosmoswp-cb-items",o).css("z-index",""),e(".cosmoswp-available-items",o).removeClass("cwp-available-item-moving"),i.helper.parent().css("z-index","")}}),a.length>0&&(a.sortable({revert:!0,change:function(e,o){t.save()},receive:function(o,i){e(this).find(".grid-stack-item").removeAttr("style").attr("data-gs-width",1),t.save()}}),t.panels[i].sidebar=a),e(".cosmoswp-available-items .grid-stack-item",o).resizable({handles:"w, e",stop:function(e,o){t.setGridWidth(o.element.parent(),o),t.save()}})})},sortGrid:function(t){e(".grid-stack-item",t).each(function(){var t=e(this),o=t.attr("data-gs-x")||0;o=parseInt(o);var i=t.next();if(i.length>0){var s=i.attr("data-gs-x")||0;o>(s=parseInt(s))&&t.insertAfter(i)}})},getX:function(e){var t=e.attr("data-gs-x")||0;return parseInt(t)},getW:function(e,t){var o;return _.isUndefined(t)&&(t=!1),o=t?e.attr("data-df-width")||1:e.attr("data-gs-width")||1,parseInt(o)},gridGetItemInfo:function(e,t,o){var i,s=this.getX(e),a=this.getW(e),n=0,r=0,l=!1;for(i=s-1;i>=0&&!l;)0===t[i]?n++:l=!0,i--;for(l=!1,i=s+a;i<this.cols&&!l;)0===t[i]?r++:l=!0,i++;return{flag:t,x:s,w:a,item:e,before:n,after:r,id:e.attr("data-id")||"",wrapper:o}},updateItemsPositions:function(e){for(var t=this.cols,o=0;o<=t;o++)"object"!=typeof e[o]&&"function"!=typeof e[o]||e[o].attr("data-gs-x",o)},gridster:function(e,t,o){var s,a=[],n=this,r=this.cols,l=function(e){for(var t=e.x,o=e.w,i=e.el,s=t;s<t+o;s++)a[s]=s===t?i:1},c=function(e){for(var t=e.x,o=e.w,i=(e.el,t);i<t+o;i++)a[i]=0},d=function(e,t){for(var o=0,i=e;i<r;i++)if(0===a[i])o++;else if(t)return o;return o},f=function(e,t){var o=0;void 0===t&&(t=!1);for(var i=e;i>=0;i--)if(0===a[i])o++;else if(t)return o;return o},p=function(e){return 0===a[e]},w=function(e,t){for(var o=e;o<e+t;){if(0!==a[o])return!1;o++}return!0},g=function(e){if(e<0)return{x:-1,w:1};var t,o,i,s=-1;if(a[e]<=1)for(t=e,i=!1;t>=0&&!i;)1!==a[t]&&0!==a[t]&&(s=t,i=!0),t--;else s=e;for(t=s+1,o=s;1===a[t];)o++,t++;return{x:s,w:o+1-s}},v=function(e){var t,o,i,s=-1;if(a[e]<r)for(t=e,i=!1;t<r&&!i;)1!==a[t]&&0!==a[t]&&(s=t,i=!0),t++;else s=e;for(t=s+1,o=s;1===a[t];)o++,t++;return{x:s,w:o+1-s}},m=function(e,t){var o=a.slice(),i=f(e);if(0===i)return t;var s=g(e),n=s.x>=0?s.x+s.w-1:e,r=t;r=t>i?i:t;for(var l=0,c=0,d=n;c<=r&&d>=0;)0===a[d]&&(c++,l=d),d--;var p=[],w=0;for(d=l;d<=n;d++)a[d]=0,0!==o[d]&&(p[w]=o[d],w++);for(w=0,d=l;d<=n;d++)void 0!==p[w]?a[d]=p[w]:a[d]=0,w++;return t-r},u=function(e,t){var o=a.slice(),i=d(e);if(0===i)return t;var s=g(e),n=s.x>=0?s.x:e,l=t;l=t<=i?t:i;for(var c=e,f=0,p=n;f<l&&p<r;)0===a[p]&&(f++,c=p),p++;var w=[],v=0;for(p=n;p<=c;p++)a[p]=0,0!==o[p]&&(w[v]=o[p],v++);for(v=w.length-1,p=c;p>=n;p--)void 0!==w[v]?a[p]=w[v]:a[p]=0,v--;return t-l},h=function(){n.updateItemsPositions(a)},b=function(e,t){var o,i,s,c,b=e.x,x=e.w,C=function(){for(var e=0,t=0;t<r;t++)0===a[t]&&e++;return e}();if(C<=0)return!1;if(_.isUndefined(t)&&(t=!1),!t){if(p(b)){if(w(b,c=x))return l(e),e.el.attr("data-gs-x",b),e.el.attr("data-gs-width",c),!0;for((o=(i=d(b,!0))+(s=f(b-1,!0))>=x&&x-i<=s?b-(x-i):b-s)<0&&(o=0),console.log("_re",i),console.log("_le",s),console.log("__x",o);c>=1;){if(w(o,c))return console.log({x:o,w:c}),e.x=o,e.w=c,l(e),e.el.attr("data-gs-x",o),e.el.attr("data-gs-width",c),!0;c--}}if(1===a[b]){var y=g(b);if(y.x>=0&&b>y.x+Math.floor(y.w/2)&&b>y.x&&(o=y.x+y.w,i=d(o,!0),console.log("__re",i),console.log("__re_X",o),i>=x))return l({el:e.el,x:o,w:x}),e.el.attr("data-gs-x",o),e.el.attr("data-gs-width",x),!0}}console.log("--------------------------------------------------------");!function(e,t){var o,i,s,r,l=0,c=!1;if(console.log("insert at x",t),console.log("insert node",e),p(t)){if(console.log("empty_at_X",t),o=g(t),i=v(t),o.x>-1){if(console.log("found_item_left",o),(l=d(o.x))>=e.w)if(w(t,e.w))console.log("found",e),b=t,c=!0;else if(e.ox>t)for(s=o.x+o.w,r=(r=f(s))<=e.w?e.w-r:e.w,u(s+1,r),l=d(s),console.log("loop_start_i",s),c=!1;s>o.x+o.w&&!c;)w(s,e.w)&&(console.log("found_in_loop__i",s),b=s,c=!0),s--;if(!c&&e.ox<t){console.log("try_move_items_to_left",o),s=o.x+o.w-1,r=f(o.x),console.log("el",r),r>e.w&&(r=e.w),r-=2,m(o.x,r),console.log("try_move_items_to_left_flag",a),console.log("el2",r),s-=l=d(s),i=v(t);var h=o.x+o.w;for(i.x>-1&&(h=i.x),console.log("loop_start 2_i",s);s<h&&!c;)w(s,e.w)&&(console.log("found_in_loop__@__i",s),b=s,c=!0),s++}c||(b=o.x+o.w,e.w=l,e.x=b,console.log("resize_new_w",l),console.log("resize_new_x",b))}else if(i.x>-1){console.log("found_item_right",i),i=v(t),l=d(t,!1),console.log("move_all_item_to Right");var _=l>=e.w?e.w:l;for(u(t,_),s=i.x,console.log("loop_start Right",s);s>=0&&!c;)w(s,e.w)&&(b=s,e.x=b,c=!0,console.log("found_in_while_r",s)),s--;c||(b=t,e.w=l,e.x=b,console.log("resize_r_new_w",l),console.log("resize_r_new_x",b))}}else if(console.log("x is not empty"),o=g(t),e.ox<o.x)if(m(t,e.w),console.log("Move All items to left"),p(t))b=t;else{for(;!p(t)&&t<=n.cols-1;)t++;b=t}else if(u(t,e.w),console.log("Move All items to right"),p(t))b=t;else{for(;!p(t)&&t>=0;)t--;b=t}b>n.cols&&(b=n.cols-1),e.x=b,console.log("new node x",b)}(e,_.clone(b));var I,z=b,P=!1,k=0;for(b+x>n.cols-1&&(k=f(b,!0),console.log("le",k),k>0&&console.log("move_Left",b+x-n.cols-1)),h(),k=0;x>=1;){if(C>=x){if(w(b,x))return console.log("",{x:b,w:x}),e.w=x,l(e),e.el.attr("data-gs-x",b),e.el.attr("data-gs-width",x),!0;for(P=!1,k=f(b,!0),z=b-k,console.log("newX",z),I=z;I<r&&!P;){if(w(I,x))return console.log("Insert in While",{x:I,w:x}),e.w=x,l({el:e.el,x:I,w:x}),e.el.attr("data-gs-x",I),e.el.attr("data-gs-width",x),P=!0,!0;I++}}x--}for(x=e.w,P=!1;x>=1;){for(I=0;I<r&&!P;){if(w(I,x))return console.log("Insert in While 2",{x:I,w:x}),l({el:e.el,x:I,w:x}),e.el.attr("data-gs-x",I),e.el.attr("data-gs-width",x),P=!0,!0;I++}x--}return console.log("Insert END While",{x:I,w:x}),!1};s=(a=(n=this).getFlag(e)).slice();var x=e.offset();n.draggingItem=t.draggable;var C,y,I,z,P=e.width(),k=P/n.cols,D=0,A=t.offset;y=n.getW(t.draggable,!1),C=n.getW(t.draggable,!0),I=t.draggable.width(),console.log("DROP ITEM WIDTH",C),console.log("DROP ITEM cw WIDTH",y);var W=n.getX(t.draggable);i&&c({el:t.draggable,x:W,w:C});var S,T=0,G=0,M=!1;if(t.draggable.parent().is(e)?(z=!0,console.log("Item in this row"),C=y):(z=!1,console.log("Not in this row"),C<y&&(C=y)),i?(T=Math.round((x.left+P+10-o.clientX)/k),(G=Math.round((x.left+P-(A.left+I+10))/k))<0&&(G=0)):(T=Math.round((o.clientX-x.left)/k),(G=Math.round((A.left-x.left-10)/k))<0&&(G=0)),T>n.cols&&(T=n.cols),D=G,S=G,i)if(p(S))D=G,M=!0;else for(;S<n.cols&&!M;)p(S)?M=!0:S++;else if(p(D))D=G,M=!0;else{for(;D<=T&&!M;)p(D)?M=!0:D++;D>T&&(D=T)}if(M||(D=z?G:T),D<0&&(D=0),D+C>=n.cols){for(M=!0,S=D;S+C>n.cols&&M;)p(S)?S--:(S++,M=!1),console.log("loop_i",S);console.log("Find new _i, w: "+C,S),D=S}delete M,console.log("DROP Cursor",T),console.log("DROP row x cacl",D),console.log("DROP item w",C);var R={el:t.draggable,x:D,w:C,ox:W,ow:y};R.x<=0&&(R.x=0);var F=!1;z?(R.x=parseInt(t.draggable.attr("data-gs-x")||0),R.w=parseInt(t.draggable.attr("data-gs-width")||1),console.log("swap node",R),function(e,t){e.x;var o=e.w;c(e),console.log("Swap newX",t),console.log("Before Swap FLAG",a);var i=g(t),s=0;if(i.x>-1&&(s=i.x+i.w),w(t,o))return l({el:e.el,x:t,w:o}),!0;if(s>0&&w(s,o)&&t>=s){var r=v(t);if(r.x>-1&&e.w+t>=r.x)for(var d=_.clone(t);d>s;){if(w(d,o))return l({el:e.el,x:d,w:o}),!0;d--}if(t+o>n.cols){var f=n.cols-o;if(w(f,o))return l({el:e.el,x:f,w:o}),!0}return l({el:e.el,x:s,w:o}),!0}e.x=t,b(e,!0)}(R,D),F=!0):(F=b(R),console.log("Insert node")),F?(t.draggable.removeClass("item-from-list"),e.append(t.draggable),t.draggable.removeAttr("style"),console.log("DID Flag: ",a),n.draggingItem=null):(t.draggable.removeAttr("style"),console.log("Can not insert"),a=s),h(),n.updateAllGrids()},updateAllGrids:function(){var e=this;_.each(e.panels[e.activePanel],function(t,o){e.updateGridFlag(t)})},setGridWidth:function(e,t){var o,s,a=t.element,n=e.width(),r=t.size.width,l=t.originalSize.width,c=Math.ceil(n/this.cols)-1;i?(o=t.originalPosition.left>t.position.left,s=l!==r):(o=t.originalPosition.left>t.position.left,s=t.originalPosition.left<t.position.left);var d,f,p,w=t.originalElement.attr("data-gs-width")||1,g=t.originalElement.attr("data-gs-x")||0;w=parseInt(w),g=parseInt(g);var v,m=this.getFlag(e),u=this.gridGetItemInfo(t.originalElement,m,e);if(o)return i?(f=Math.floor((t.position.left-1)/c),(d=(f=this.cols-f)-g-w)>u.after&&(d=u.after),p=w+d,a.attr("data-gs-x",g).removeAttr("style"),a.attr("data-gs-width",p).removeAttr("style")):((d=g-(f=Math.floor((t.position.left-1)/c)))>u.before&&(d=u.before),f=g-d,p=w+d,a.attr("data-gs-x",f).removeAttr("style"),a.attr("data-gs-width",p).removeAttr("style")),void this.updateGridFlag(e);if(s)return i?(t.originalPosition.left!==t.position.left?(f=Math.floor((t.position.left-1)/c),(d=w+g-(f=this.cols-f))>w&&(d=0),p=w-d,(f=g)<=0&&(f=0),console.log("diffRight_RTL_COL_New __left")):(f=Math.ceil((t.position.left+t.size.width-11)/c),(d=g-(f=this.cols-f))>u.before&&(d=u.before),f=g-d,p=w+d),a.attr("data-gs-x",f).removeAttr("style"),a.attr("data-gs-width",p).removeAttr("style")):((p=w-(d=(f=Math.round((t.position.left-1)/c))-g))<=0&&(p=1,d=0),f=g+d,a.attr("data-gs-x",f).removeAttr("style"),a.attr("data-gs-width",p).removeAttr("style")),void this.updateGridFlag(e);var h,_=u.x;r<t.originalSize.width?((h=Math.round((t.position.left+t.size.width-11)/c))<=_&&(h=_+1),v=u.w-(_+u.w-h)):(h=Math.ceil((t.position.left+t.size.width-11)/c),v=u.w+(h-(_+u.w)),u.x+v>u.x+u.w+u.after&&(v=u.w+u.after)),v<=0&&(v=1),a.attr("data-gs-width",v).removeAttr("style"),this.updateGridFlag(e)},getFlag:function(e){var t,o=e.data("gridRowFlag")||[];if(_.isEmpty(o)){for(t=0;t<this.cols;t++)o[t]=0;e.data("gridRowFlag",o)}return o},updateGridFlag:function(t){var o,i=this,s=[];for(o=0;o<i.cols;o++)s[o]=0;return e(".grid-stack-item",t).each(function(t){e(this).removeAttr("style");var a=i.getX(e(this)),n=i.getW(e(this));for(o=a;o<a+n;o++)s[o]=o===a?e(this):1}),t.data("gridRowFlag",s),i.updateItemsPositions(s),i.sortGrid(t),s},addNewWidget:function(t,o){var i=this,s=i.container.find(".cosmoswp-device-panel.cosmoswp-panel-"+i.activePanel),a=o;_.isObject(a)||(a=s.find(".cosmoswp-cb-items").first());var n=t;n.draggable({revert:"invalid",appendTo:s,scroll:!1,zIndex:99999,handle:".grid-stack-item-content",start:function(t,o){e("body").addClass("builder-item-moving"),e(".cosmoswp-cb-items",s).css("z-index",""),o.helper.parent().css("z-index",9999)},stop:function(t,o){e("body").removeClass("builder-item-moving"),e(".cosmoswp-cb-items",s).css("z-index",""),i.save()},drag:function(e,t){}}).resizable({handles:"w, e",start:function(e,t){t.originalElement.css({right:"auto",left:t.position.left})},stop:function(e,t){i.setGridWidth(t.element.parent(),t),i.save()}}),a.append(n),i.updateGridFlag(a)},addPanel:function(t){var o=this.getTemplate();if(0!=e("#tmpl-cosmoswp-cb-panel").length)return _.isObject(s.rows)||(s.rows={}),'<div class="cosmoswp-device-panel cosmoswp-vertical-panel cosmoswp-panel-'+t+'" data-device="'+t+'">'+o({device:t,id:s.id,rows:s.rows},"tmpl-cosmoswp-cb-panel")+"</div>"},addDevicePanels:function(){var t=this;_.each(t.devices,function(o,i){var s=t.addPanel(i);e(".cosmoswp-cb-devices-switcher",t.container).append('<a href="#" class="switch-to switch-to-'+i+'" data-device="'+i+'">'+o+"</a>"),e(".cosmoswp-cb-body",t.container).append(s)})},addItem:function(t){var o=this.getTemplate();if(0!=e("#tmpl-cosmoswp-cb-item").length){var i=o(t,"tmpl-cosmoswp-cb-item");return e(i)}},addAvailableItems:function(){var t=this;_.each(t.devices,function(o,i){var s=e('<div class="cosmoswp-available-items" data-device="'+i+'"></div>');e(".cosmoswp-panel-"+i,t.container).append(s),s.append('<div class="cwp-close-item-wrap"><span class="cwp-close-item-panel dashicons dashicons-no"></span></div>'),_.each(t.items,function(e){var o=!0;if(!_.isUndefined(e.devices)&&!_.isEmpty(e.devices))if(_.isString(e.devices))e.devices!=i&&(o=!1);else{var a=!1;_.each(e.devices,function(e){i==e&&(a=!0)}),a||(o=!1)}if(o){var n=t.addItem(e);s.append(n)}})})},switchToDevice:function(t,o){_.size(this.devices)>1?(e(".cosmoswp-cb-devices-switcher a",this.container).removeClass("cosmoswp-tab-active"),e(".cosmoswp-cb-devices-switcher .switch-to-"+t,this.container).addClass("cosmoswp-tab-active"),e(".cosmoswp-device-panel",this.container).addClass("cosmoswp-panel-hide"),e(".cosmoswp-device-panel.cosmoswp-panel-"+t,this.container).removeClass("cosmoswp-panel-hide"),this.activePanel=t):e(".cosmoswp-cb-devices-switcher a",this.container).addClass("cosmoswp-tab-active"),(_.isUndefined(o)||o)&&("desktop"==t?e("#customize-footer-actions .preview-desktop").trigger("click"):"mobile"==t&&e("#customize-footer-actions .preview-mobile").trigger("click"))},addExistingRowsItems:function(){var o=this,i=t.control(o.controlId).setting._value;_.isObject(i)||(i=i?JSON.parse(i):{}),_.each(o.panels,function(t,s){var a={};_.isObject(i[s])&&(a=i[s]),_.each(a,function(i,a){_.isUndefined(i)||_.each(i,function(i,n){var r=e('.cosmoswp-available-items[data-device="'+s+'"] .grid-stack-item[data-id="'+i.id+'"]').first();r.attr("data-gs-width",i.width),r.attr("data-gs-x",i.x),r.removeClass("item-from-list"),o.addNewWidget(r,t[a])})})}),o.ready=!0},focus:function(){this.container.on("click",".cosmoswp-cb-item-setting, .cosmoswp-cb-item-name, .item-tooltip",function(o){o.preventDefault();var i=e(this).data("section")||"",s=e(this).attr("data-control")||"",a=!1;s&&(_.isUndefined(t.control(s))||(t.control(s).focus(),a=!0)),a||i&&!_.isUndefined(t.section(i))&&(t.section(i).focus(),a=!0)}),this.container.on("click",".cosmoswp-cb-row-settings",function(o){o.preventDefault();var i=e(this).attr("data-id")||"",a=s.id+"_"+i;_.isUndefined(t.section(a))||t.section(a).focus()})},remove:function(){var t=this;o.on("click",".cosmoswp-device-panel .cosmoswp-cb-item-remove",function(o){o.preventDefault();var i=e(this).closest(".grid-stack-item"),s=i.closest(".cosmoswp-device-panel");i.attr("data-gs-width",1),i.attr("data-gs-x",0),i.removeAttr("style"),e(".cosmoswp-available-items",s).append(i),t.updateAllGrids(),t.save()})},encodeValue:function(e){return encodeURI(JSON.stringify(e))},decodeValue:function(e){return JSON.parse(decodeURI(e))},save:function(){var o=this;if(o.ready){var i={};_.each(o.panels,function(t,s){i[s]={},_.each(t,function(t,a){var n=_.map(e(" > .grid-stack-item",t),function(t){return t=e(t),{x:o.getX(t),y:1,width:o.getW(t),height:1,id:t.data("id")||""}});i[s][a]=n})}),t.control(o.controlId).setting.set(o.encodeValue(i))}},showPanel:function(){var t=this;this.container.removeClass("cosmoswp-builder--hide").addClass("cosmoswp-builder-show"),setTimeout(function(){var o=t.container.height();e("#customize-preview").addClass("cb--preview-panel-show").css({bottom:o-1,"margin-top":"0px"})},100)},hidePanel:function(){this.container.removeClass("cosmoswp-builder-show"),a(this.container.find(".cosmoswp-available-items")),e("#customize-preview").removeClass("cb--preview-panel-show").removeAttr("style")},togglePanel:function(){var i=this;t.state("expandedPanel").bind(function(e){t.panel(s.panel).expanded()?(o.trigger("cosmoswp_panel_builder_open",[s.panel]),top._current_builder_panel=n,i.showPanel()):i.hidePanel()}),i.container.on("click",".cosmoswp-panel-close",function(t){t.preventDefault(),i.container.toggleClass("cosmoswp-builder--hide"),i.container.hasClass("cosmoswp-builder--hide")?e("#customize-preview").removeClass("cb--preview-panel-show"):e("#customize-preview").addClass("cb--preview-panel-show")})},panelLayoutCSS:function(){var o=e("#customize-controls").width();t.state("paneVisible").get()||(o=0),i?this.container.find(".cosmoswp-cb-inner").css({"margin-right":o}):this.container.find(".cosmoswp-cb-inner").css({"margin-left":o})},init:function(i,r,l){var c=this,d=c.getTemplate()(s,"tmpl-cosmoswp-builder-panel");c.container=e(d),e("body .wp-full-overlay").append(c.container),c.controlId=i,c.items=r,c.devices=l,s.section&&t.section(s.section).container.addClass("cosmoswp-hide"),c.addDevicePanels(),c.switchToDevice(c.activePanel),c.addAvailableItems(),c.switchToDevice(c.activePanel),c.drag_drop(),c.focus(),c.remove(),c.addExistingRowsItems(),t.panel(s.panel).expanded()?(console.log("open-builder:",s.panel),c.showPanel()):c.hidePanel(),t.previewedDevice.bind(function(e){"desktop"===e?c.switchToDevice("desktop",!1):c.switchToDevice("mobile",!1)}),c.togglePanel(),t.state("paneVisible").get()&&c.panelLayoutCSS(),t.state("paneVisible").bind(function(){c.panelLayoutCSS()}),e(window).resize(_.throttle(function(){c.panelLayoutCSS()},100)),c.container.on("click",".cosmoswp-cb-devices-switcher a.switch-to",function(t){t.preventDefault();var o=e(this).data("device");c.switchToDevice(o),e(".cosmoswp-cb-body").find(".cosmoswp-available-items").each(function(){a(e(this))})}),o.trigger("cosmoswp_builder_panel_loaded",[n,c])}};return r.init(s.control_id,s.items,s.devices),r};t.bind("ready",function(o,i){_.each(CosmosWP_Customizer_Builder.builders,function(e,t){new s(e,t)}),t.bind("pane-contents-reflowed",function(){setTimeout(function(){e("#sub-accordion-panel-widgets .no-widget-areas-rendered-notice .footer_moved_widgets_text").length||e("#sub-accordion-panel-widgets .no-widget-areas-rendered-notice").append('<p class="footer_moved_widgets_text">'+CosmosWP_Customizer_Builder.footer_moved_widgets_text+"</p>")},1e3)}),t.state("expandedSection").bind(function(t){e(".cosmoswp-device-panel .grid-stack-item").removeClass("item-active"),e(".cosmoswp-cb-row").removeClass("row-active"),t&&(e('.cosmoswp-cb-row[data-id="'+t.id+'"]').addClass("row-active"),e(".cosmoswp-device-panel .grid-stack-item.for-s-"+t.id).addClass("item-active"))})}),o.on("click",".focus-section",function(o){o.preventDefault();var i=e(this).attr("data-id")||"";i||(i=(i=e(this).attr("href")||"").replace("#","")),i&&t.section(i)&&t.section(i).focus()}),o.on("click",".focus-control",function(o){o.preventDefault();var i=e(this).attr("data-id")||"";i||(i=(i=e(this).attr("href")||"").replace("#","")),i&&t.control(i)&&t.control(i).focus()}),o.on("click",".focus-panel",function(o){o.preventDefault();var i=e(this).attr("data-id")||"";i||(i=(i=e(this).attr("href")||"").replace("#","")),i&&t.panel(i)&&t.panel(i).focus()});function a(t){var o=t.prev(".cwp-add-new-item");o.length||(o=o.prev(".cosmoswp-cp-sidebar").find(".cwp-add-new-item")),t.length&&(t.removeClass("cwp-show-items"),e("body").removeClass("cwp-body-overlay"),o.removeClass("cwp-hide-items"))}o.on("mouseover",".cosmoswp-cb-row .grid-stack-item",function(t){var o=e(this);e(".cosmoswp-cb-item-remove",o).outerWidth()+e(".cosmoswp-cb-item-setting",o).outerWidth()>e(".grid-stack-item-content",o).innerWidth()-50&&o.addClass("show-tooltip")}),o.on("mouseleave",".cosmoswp-cb-row .grid-stack-item",function(t){e(this).removeClass("show-tooltip")}),o.on("click",".cwp-add-new-item",function(t){var o=e(this),i=o.next(".cosmoswp-available-items");i.length||(i=o.closest(".cosmoswp-cp-sidebar").next(".cosmoswp-available-items")),i.length&&(i.toggleClass("cwp-show-items"),e("body").toggleClass("cwp-body-overlay"),o.toggleClass("cwp-hide-items"))}),o.on("click",".cwp-close-item-panel",function(t){a(e(this).closest(".cosmoswp-available-items"))})}(jQuery,wp.customize||null);